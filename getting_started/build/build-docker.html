 <div id="main-content" class="wiki-content">
                           
        <p>The docker container provided in docker_build sets up a build environment for<br/>building Sound Open Firmware. A working docker installation is needed to run<br/>the docker build container.</p><p><div class="toc-macro client-side-toc-macro  conf-macro output-block" data-headerelements="H1,H2,H3,H4,H5,H6,H7" data-hasbody="false" data-macro-name="toc"> </div></p><h1 id="SOFDocker-1.Setupdocker">1.Setup docker</h1><p>On Ubuntu:</p><pre>sudo apt-get install docker.io</pre><p>Set up proxy</p><pre>sudo mkdir -p /etc/systemd/system/docker.service.d</pre><pre>sudo vim /etc/systemd/system/docker.service.d/proxy.conf</pre><p style="margin-left: 30.0px;">[Service]<br/>Environment=&quot;http_proxy=http://proxyurl:port&quot;<br/>Environment=&quot;https_proxy=http://proxyurl:port&quot;</p><p>Add user to docker user group</p><pre>sudo usermod -aG docker $user_name</pre><p>Restart docker</p><pre>systemctl daemon-reload</pre><pre>systemctl restart docker</pre><h1 id="SOFDocker-2.Getdockerimage">2.Get docker image</h1><h2 id="SOFDocker-1.Dockerimagebuild">1.Docker image build</h2><p>clone sof.git/ and soft.git/ into a directories thus they are siblings.</p><pre>git clone git://git.alsa-project.org/sound-open-firmware.git sof.git</pre><pre>git clone git://git.alsa-project.org/sound-open-firmware-tools.git soft.git</pre><pre>cd sof.git/scripts/docker_build</pre><pre>./docker-build.sh</pre><p>After the container is built, it can be used to run the scripts.</p><p>This step needs to be done initially and</p><p>when the toolchain or alsa dependencies are updated.</p><h2 id="SOFDocker-2.Pulldockerimagefromdockerhub">2. Pull docker image from docker hub</h2><pre>docker pull xiulipan/sof</pre><p>Then docker images should show</p><pre>docker images<br/>REPOSITORY TAG IMAGE ID CREATED SIZE<br/>xiulipan/sof latest 021c7f05eac9 Less than a second ago 923MB</pre><p>This docker image will be updated once bigger changes happens in tool-chain or alsa-lib</p><p>Any problem or question or problem, please email:</p><p>xiuli.pan@intel.com</p><h2 id="SOFDocker-3.Importdockerimagefromtarball">3. Import docker image from tarball</h2><p>TODOï¼šAdd download link for sofdocker.tar</p><pre>docker import sofdocker.tar sof</pre><p>sofdocker.tar is tar from image xiulipan/sof</p><h1 id="SOFDocker-3.UseDockertobuildsof.">3. Use Docker to build sof.</h1><p>To build for baytrail:</p><pre>./scripts/docker-run.sh ./scripts/xtensa-build-all.sh byt</pre><p>To rebuild the topology in soft.git:</p><pre>./scripts/docker-run.sh ./scripts/build-soft.sh</pre><p>An incremental sof.git build:</p><pre>./scripts/docker-run.sh make</pre><p>Or enter a shell:</p><pre>./scripts/docker-run.sh bash</pre><p> </p>

                
        
    
        </div>